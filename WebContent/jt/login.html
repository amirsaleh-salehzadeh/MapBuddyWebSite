<div class="row" id="login-form">
	<div class="col-md-4"></div>
	<div class="col-md-4">
		<form method="post" action="#" enctype="multipart/form-data"
			novalidate>
			<br>
			<div class="row">
				<div class="form-group col-sm-12">
					<h4 class="text-center">Login</h4>
				</div>
				<div class="form-group col-sm-12">
					<div class="input-group-prepend">
						<span class="input-group-addon"><i class="fa fa-user"></i></span>
						<input type="email" class="form-control"
							onchange="alert('Validate the username uniqueness.')"
							placeholder="Email or username" autocomplete="off" id="username"
							name="username" required="required">
					</div>
				</div>
				<div class="form-group col-sm-12">
					<div class="input-group-prepend">
						<span class="input-group-addon"><i class="fa fa-key"></i></span><input
							type="password" class="form-control" id="password1"
							name="password1" placeholder="Password" data-toggle="tooltip"
							title="Password must be at least 8 charachters, including numbers and charachters.">
					</div>
				</div>
				<br>
				<div class="input-group col-md-12">
					<button class="btn btn-primary btn-block btn-success" type="button"
						id="register-btn" onclick='loadContent("login.html")'>
						<i class="fa fa-sign-in-alt">&nbsp;&nbsp;&nbsp;</i>Login
					</button>
				</div>
				<div class="input-group col-md-12">
					<button class="btn btn-link btn-block text-left" type="button"
						id="register-btn"
						onclick='$("#register-form").show();$("#login-form").hide();'>Forgot
						your password?</button>
				</div>
			</div>
			<div class="separator">Or</div>
			<div class="row form-group">
				<div class="input-group col-md-12">
					<button class="btn btn-link btn-block" type="button"
						id="register-btn" onclick='loadContent("registration.html")'>Register
						Now</button>
				</div>
			</div>
			<div class="separator">Or</div>
			<div class="form-row">
				<!-- 				<div class="col-md-12 card"> -->
				<label for="invitKey">Do you have an invitation code from an
					institute?</label>
				<div class="input-group-prepend col-md-10">
					<span class="input-group-addon"><i class="fa fa-qrcode">&nbsp;&nbsp;&nbsp;</i></span>
					<input type="text" class="form-control" data-toggle="tooltip"
						id="invitKey"
						title="If you have an invitation code from any institute, please insert the code here."
						placeholder="Invitation Key" autocomplete="off" name="username">
				</div>
				<div class="col-auto">
					<button class="btn btn-primary btn-sm"
						onclick="toggleMessageBox('A request has been sent to the institute.', false)">
						<i class="fa fa-file-signature">&nbsp;&nbsp;&nbsp;</i>Join
					</button>
				</div>
				<!-- 				</div> -->
			</div>
		</form>
	</div>
</div>
<script>
//External js: jquery, isotope.pkgd.js, bootstrap.min.js, bootstrap-slider.js
$(document).ready( function() {

  // Create object to store filter for each group
  var buttonFilters = {};
  var buttonFilter = '*';
  // Create new object for the range filters and set default values,
  // The default values should correspond to the default values from the slider
  var rangeFilters = {
      'grade': {'min':0, 'max': 12}
    };

  // Initialise Isotope
  // Set the item selector
  var $grid = $('.grid').isotope({
    itemSelector: '.item',
    layout: 'masonry',
    // use filter function
    filter: function() {
      var $this = $(this);
      var grade = $this.attr('data-grade');
      var isInGradeRange = (rangeFilters['grade'].min <= grade && rangeFilters['grade'].max >= grade);
      //console.log(rangeFilters['height']);
      //console.log(rangeFilters['weight']);
      // Debug to check whether an item is within the height weight range
      //console.log('isInHeightRange:' +isInHeightRange + '\nisInWeightRange: ' + isInWeightRange );
      return $this.is( buttonFilter ) && (isInHeightRange && isInGradeRange);
    }
  });


  // Initialise Sliders
  // Set min/max range on sliders as well as default values
  var $gradeSlider = $('#filter-grade').slider({ tooltip_split: true, min: 0,  max: 12, range: true, value: [0, 12] });


  function updateRangeSlider(slider, slideEvt) {
    var sldmin = +slideEvt.value[0],
        sldmax = +slideEvt.value[1],
        // Find which filter group this slider is in (in this case it will be either height or weight)
        // This can be changed by modifying the data-filter-group="age" attribute on the slider HTML
        filterGroup = slider.attr('data-filter-group'),
        // Set current selection in variable that can be pass to the label
        currentSelection = sldmin + ' - ' + sldmax;

      // Update filter label with new range selection
      slider.siblings('.filter-label').find('.filter-selection').text(currentSelection);

      // Set min and max values for current selection to current selection
      // If no values are found set min to 0 and max to 100000
      // Store min/max values in rangeFilters array in the relevant filter group
      // E.g. rangeFilters['height'].min and rangeFilters['height'].max
      console.log('Filtergroup: '+ filterGroup);
      rangeFilters[filterGroup] = {
        min: sldmin || 0,
        max: sldmax || 100000
      };
      // Trigger isotope again to refresh layout
      $grid.isotope();

  }

  // Trigger Isotope Filter when slider drag has stopped
  $gradeSlider.on('slideStop', function(slideEvt){
    var $this =$(this);
    updateRangeSlider($this, slideEvt);
  });


  // Look inside element with .filters class for any clicks on elements with .btn
  $('.filters').on( 'click', '.btn', function() {
    var $this = $(this);
    // Get group key from parent btn-group (e.g. data-filter-group="color")
    var $buttonGroup = $this.parents('.btn-group');
    var filterGroup = $buttonGroup.attr('data-filter-group');
    // set filter for group
    buttonFilters[ filterGroup ] = $this.attr('data-filter');
    // Combine filters or set the value to * if buttonFilters
    buttonFilter = concatValues( buttonFilters ) || '*';
    // Log out current filter to check that it's working when clicked
    console.log( buttonFilter )
    // Trigger isotope again to refresh layout
    $grid.isotope();
  });


  // change is-checked class on btn-filter to toggle which one is active
  $('.btn-group').each( function( i, buttonGroup ) {
      var $buttonGroup = $( buttonGroup );
      $buttonGroup.on( 'click', '.btn-filter', function() {
          $buttonGroup.find('.is-checked').removeClass('is-checked');
          $(this).addClass('is-checked');
      });
  });

});

// Flatten object by concatting values
function concatValues( obj ) {
  var value = '';
  for ( var prop in obj ) {
    value += obj[ prop ];
  }
  return value;
}

</script>
